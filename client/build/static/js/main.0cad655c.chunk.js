(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,n){e.exports={ldsEllipsis:"loader_ldsEllipsis__ZVw9y",ldsEllipsis1:"loader_ldsEllipsis1__KGlAT",ldsEllipsis2:"loader_ldsEllipsis2__2_ANZ",ldsEllipsis3:"loader_ldsEllipsis3__3Bx_w"}},32:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(24),r=n.n(s),o=(n(32),n(33),Object(a.createContext)({token:null,userId:null,login:function(){},logout:function(){},isAuthenticated:!1})),i=n(2),l=n(4),u=n.n(l),d=n(10),j=n(14),b=n(12),O=n(9),x=function(){var e=Object(a.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),r=Object(O.a)(s,2),o=r[0],i=r[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,s,r,o,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{},e.prev=3,c(!0),a&&(a=JSON.stringify(a),s["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:s});case 8:return r=e.sent,e.next=11,r.json();case 11:if(o=e.sent,r.ok){e.next=14;break}throw new Error(o.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return c(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(3),c(!1),i(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(a.useCallback)((function(){return i(null)}),[])}},p=function(){return Object(a.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[])},h=n(25),m=n.n(h),f=n(0),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(f.jsxs)("div",{className:"".concat(m.a.ldsEllipsis," ").concat(e),children:[Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{}),Object(f.jsx)("div",{})]})},g=function(e){var t=e.setForm,n=e.form;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"card-title",children:"Register"}),Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"password",type:"password",className:"validate",name:"password",onChange:function(e){t(Object(b.a)(Object(b.a)({},n),{},Object(j.a)({},e.target.name,e.target.value)))}}),Object(f.jsx)("label",{htmlFor:"password",children:"Password"})]})})]})},w=function(e){var t=e.setForm,n=e.form;return Object(f.jsx)("div",{className:"row",children:Object(f.jsxs)("div",{className:"input-field col s12",children:[Object(f.jsx)("input",{id:"email",type:"text",className:"validate",name:"email",onChange:function(e){t(Object(b.a)(Object(b.a)({},n),{},Object(j.a)({},e.target.name,e.target.value)))}}),Object(f.jsx)("label",{htmlFor:"email",children:"Email"})]})})},k=function(e){var t=e.request,n=e.form,a=e.message,c=function(){var e=Object(d.a)(u.a.mark((function e(){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/auth/register","POST",Object(b.a)({},n));case 3:c=e.sent,a(c.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("button",{className:"btn blue darken-4",onClick:c,children:"Register"})},_=function(e){var t=e.request,n=e.form,a=e.login,c=e.message,s=function(){var e=Object(d.a)(u.a.mark((function e(){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("/api/auth/login","POST",Object(b.a)({},n));case 3:s=e.sent,a(s.token,s.userId),c("Login is success"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("button",{className:"btn blue darken-4",onClick:s,children:"Login"})},N=function(){var e=Object(a.useContext)(o),t=x(),n=t.loading,c=t.request,s=t.error,r=t.clearError,i=p(),l=Object(a.useState)({email:"",password:""}),u=Object(O.a)(l,2),d=u[0],j=u[1];return Object(a.useEffect)((function(){i(s),r()}),[s,i,r]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col s12 m6",children:Object(f.jsxs)("div",{className:"card blue-grey darken-1",children:[Object(f.jsxs)("div",{className:"card-content white-text",children:[n?Object(f.jsx)(v,{}):null,Object(f.jsx)(g,{setForm:j,form:d}),Object(f.jsx)(w,{setForm:j,form:d})]}),Object(f.jsxs)("div",{className:"card-action",children:[Object(f.jsx)(k,{message:i,request:c,form:d}),Object(f.jsx)(_,{message:i,request:c,form:d,login:e.login})]})]})})})})},C=n(27),T=n(8),y=n.n(T),E=function(e){var t=e.todos,n=e.setTodos,c=e.request,s=e.loading,r=p(),i=Object(a.useContext)(o).jwtToken,l=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/api/todo/delete/".concat(t),"DELETE",null,{Authorization:"Bearer ".concat(i)});case 2:a=e.sent,n(a.todos),r(a.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/api/todo/update/".concat(t),"PUT",{isCompleted:!a},{Authorization:"Bearer ".concat(i)});case 2:s=e.sent,n(s.todos),r(s.message);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return console.log(s),Object(f.jsx)("div",{className:"".concat(y.a.row),children:t.length?t.map((function(e){return Object(f.jsxs)("div",{className:"teal lighten-2 ".concat(y.a.row," ").concat(y.a.todoItem),children:[Object(f.jsxs)("label",{className:y.a.checkboxLabel,children:[Object(f.jsx)("input",{disabled:s,className:y.a.completedCheckbox,type:"checkbox",checked:e.isCompleted,onChange:function(){return j(e._id,e.isCompleted)}}),Object(f.jsx)("span",{})]}),Object(f.jsxs)("span",{className:"".concat(e.isCompleted?y.a.completed:""," ").concat(y.a.todoText),children:[" ",e.text]}),Object(f.jsx)("button",{disabled:s,className:"right ".concat(y.a.deleteButton),onClick:function(){return l(e._id)},children:" X"})]},e._id)})):Object(f.jsx)("div",{children:" You have no tasks yet"})})},S=function(e){var t=e.todos,n=e.setTodos,c=e.request,s=p(),r=Object(a.useContext)(o).jwtToken,i=Object(a.useState)(""),l=Object(O.a)(i,2),j=l[0],b=l[1],x=function(){var e=Object(d.a)(u.a.mark((function e(){var a,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("userData"),o=JSON.parse(a).userId,e.next=5,c("/api/todo/create","POST",{text:j,owner:o},{Authorization:"Bearer ".concat(r)});case 5:i=e.sent,console.log(i.message),s(i.message),n([].concat(Object(C.a)(t),[i.todo])),b(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),s(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"input-field  ".concat(y.a.addTask),children:[Object(f.jsx)("input",{id:"addTask",type:"text",className:"validate",value:j,onChange:function(e){return b(e.target.value)}}),Object(f.jsx)("button",{disabled:!j,className:"waves-effect waves-light btn",onClick:x,children:"Add task"})]})},I=function(){var e=x(),t=e.loading,n=e.request,c=Object(a.useContext)(o).jwtToken,s=Object(a.useState)([]),r=Object(O.a)(s,2),i=r[0],l=r[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/api/todo/","GET",null,{Authorization:"Bearer ".concat(c)});case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,n]),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("div",{className:"".concat(y.a.container),children:[Object(f.jsxs)("div",{className:y.a.loader,children:[" ",t?Object(f.jsx)(v,{}):null," "]}),Object(f.jsx)(S,{todos:i,setTodos:l,request:n}),Object(f.jsx)(E,{todos:i,loading:t,setTodos:l,request:n})]})})},F=function(){var e=Object(a.useContext)(o),t=p();return Object(f.jsx)("nav",{children:Object(f.jsx)("div",{className:"nav-wrapper teal lighten-2",children:Object(f.jsx)("ul",{id:"nav-mobile",className:"left hide-on-med-and-down",children:Object(f.jsx)("a",{className:"waves-effect waves-light btn blue-grey darken-1",onClick:function(){e.logout(),t("Logout is success")},children:" logout "})})})})},q=n(1).useCallback,B=n(1).useState,A=function(){var e="userData",t=B(null),n=Object(O.a)(t,2),c=n[0],s=n[1],r=B(null),o=Object(O.a)(r,2),i=o[0],l=o[1],u=q((function(t,n){s(t),l(n),localStorage.setItem(e,JSON.stringify({jwtToken:t,userId:n}))}),[]),d=q((function(){s(null),l(null),localStorage.removeItem(e)}),[]);return Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem(e));t&&t.jwtToken&&u(t.jwtToken,t.userId)}),[u]),{login:u,logout:d,jwtToken:c,userId:i}},L=n(19);var P=function(){var e=A(),t=e.jwtToken,n=e.login,a=e.logout,c=e.userId,s=function(e){return e?Object(f.jsxs)(i.d,{children:[Object(f.jsxs)(i.b,{path:"/app",children:[Object(f.jsx)(F,{}),Object(f.jsx)(I,{})]}),Object(f.jsx)(i.a,{to:"/app"})]}):Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{path:"/",exact:!0,children:Object(f.jsx)(N,{})}),Object(f.jsx)(i.a,{to:"/"})]})}(!!t);return Object(f.jsx)(L.a,{children:Object(f.jsx)(o.Provider,{value:{jwtToken:t,login:n,logout:a,userId:c},children:Object(f.jsx)("div",{children:s})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),J()},8:function(e,t,n){e.exports={todoItem:"todos_todoItem__MRCBn",row:"todos_row__3iedy",addTask:"todos_addTask__2mQDd",container:"todos_container__3YyAR",deleteButton:"todos_deleteButton__SjkN7",todoText:"todos_todoText__1A1n4",completed:"todos_completed__3SuJa",completedCheckbox:"todos_completedCheckbox__1UWN3",checkboxLabel:"todos_checkboxLabel__1fB5M",loader:"todos_loader__2UkOq",disabled:"todos_disabled__1e6Lm"}}},[[40,1,2]]]);
//# sourceMappingURL=main.0cad655c.chunk.js.map